<app-base [submenus]="submenus"></app-base>
<main>
  <div class="row">
    <div class="col m1"></div>
    <div class="col s12 m10">
      <div class="card hoverable">
        <div class="card-content">
          <div class="blue lighten-1 white-text">
            <span class="card-title center">Print Receipt</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row" *ngIf="payment">
    <div class="col s12 m12 center">
      <button class="btn-small blue" (click)="generatePdf2()">
        <i class="material-icons">print</i>Print receipt
      </button>
    </div>
    <div class="col m1"></div>
    <div class="col s12 m10">
      <div class="card hoverable" #poDiv id="purchaseOrder">
        <div class="card-content">
          <div class="row grey lighten-1 header-po">
            <div class="col s4 m4">
              <img
                src="../../../../assets/images/almapps-logo.png"
                style="height: 40px"
                alt=""
              />
            </div>
            <div class="col s8 m8 right-align"><h5>Receipt</h5></div>
          </div>
          <div class="row" style="font-size: 13px">
            <div class="col s6 m6">
              <h6 class="black-text">
                <u><b>Client</b></u>
              </h6>
              <p><b>Name:</b> {{ payment.invoice.client.name }}</p>
              <p><b>Email:</b> {{ payment.invoice.client.email }}</p>
              <p><b>Address:</b> {{ payment.invoice.client.address }}</p>
              <p><b>Phone:</b> {{ payment.invoice.client.phone }}</p>
            </div>
            <div class="col s2 m2"></div>
            <div class="col s4 m4 right-align">
              <p>
                <b>Date of issue: {{ payment.date_op | date: "dd-MM-YYYY" }}</b>
              </p>
              <p>
                <b>Reference: {{ payment.reference }}</b>
              </p>
              <qrcode
                *ngIf="showQr"
                [qrdata]="payment.reference"
                [width]="70"
              ></qrcode>
            </div>
          </div>
          <div class="row">
            <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Invoice reference</th>
                  <th>Client</th>
                  <th>Invoice amount</th>
                  <th>Amount paid</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>{{ payment.invoice.reference }}</td>
                  <td>
                    <p>{{ payment.invoice.client.name }}</p>
                  </td>
                  <td>
                    <p class="right-align">
                      {{
                        calculateInvoiceAmount(payment.invoice)
                          | customCurrency: payment.invoice.currency_used
                      }}
                    </p>
                  </td>
                  <td>
                    <p class="right-align">
                      {{
                        payment.amount | customCurrency: payment.currency_used
                      }}
                    </p>
                  </td>
                </tr>
                <tr>
                  <td></td>
                  <td colspan="3"></td>
                  <td></td>
                </tr>
                <tr>
                  <td></td>
                  <td colspan="3"><b>Total paid</b></td>
                  <td>
                    <p class="right-align" style="font-weight: bolder">
                      {{
                        payment.amount | customCurrency: payment.currency_used
                      }}
                    </p>
                  </td>
                </tr>
                <tr class="red-text lighten-3">
                  <td></td>
                  <td colspan="3"><b>Balance</b></td>
                  <td>
                    <p class="right-align" style="font-weight: bolder">
                      {{
                        calculateTotalPaymentRemain()
                          | customCurrency: payment.currency_used
                      }}
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="row">
            <p>
              Amount in leters:
              <b
                >{{ payment.amount | currencyToWord }}
                {{ payment.currency_used }}</b
              >
            </p>
          </div>
          <div class="row">
            <div class="col s12 m6">
              <p><u>Client signature</u></p>
            </div>
            <div class="col s12 m6">
              <p class="right-align"><u>Company signature</u></p>
            </div>
          </div>
          <br /><br />
          <div class="divider"></div>
          <div class="center" style="font-size: 12px; font-style: italic">
            <b>
              <i
                >{{ payment.invoice.company.rc }} |
                {{ payment.invoice.company.po_box }} |
                {{ payment.invoice.company.phone }} |
                {{ payment.invoice.company.email }}</i
              ><br />
              <i
                >{{ payment.invoice.company.nui }} |
                {{ payment.invoice.company.bank_name }} |
                {{ payment.invoice.company.bank_iban }} | www.almapps.com</i
              >
            </b>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

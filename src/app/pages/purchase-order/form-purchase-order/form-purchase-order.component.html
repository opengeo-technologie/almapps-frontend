<form #clientForm="ngForm" (ngSubmit)="onSubmit()">
  <div class="row">
    <div>
      <div class="col s12 m12">
        <div class="row">
          <h5 class="center">General informations</h5>
          <hr />
          <div class="col s12 m6">
            <!-- Vendors -->
            <div class="form-input">
              <label for="vendor"
                >Vendors <span class="red-text">(*)</span></label
              >
              <select
                class="browser-default"
                name="vendor"
                id="vendor"
                [(ngModel)]="po.vendor"
                [compareWith]="compareFn"
                required
              >
                <option [ngValue]="null" disabled>Select vendor</option>
                <option *ngFor="let item of vendors" [ngValue]="item">
                  {{ item.name }}
                </option>
              </select>
            </div>
            <div class="form-input">
              <label for="date_op"
                >Date operation <span class="red-text">(*)</span></label
              >
              <div class="input-field">
                <input
                  type="date"
                  class="form-control"
                  id="date_op"
                  name="date_op"
                  [(ngModel)]="po.date_op"
                  #date_op="ngModel"
                  required
                />
              </div>
            </div>
          </div>
          <div class="col s12 m6">
            <!-- Currencies -->
            <div class="form-input">
              <label for="currency"
                >Currency <span class="red-text">(*)</span></label
              >
              <select
                class="browser-default"
                name="currency"
                id="currency"
                [(ngModel)]="po.currency"
                [compareWith]="compareFn"
                required
              >
                <option [ngValue]="null" disabled>Select currency</option>
                <option *ngFor="let item of currencies" [ngValue]="item">
                  {{ item.value }}
                </option>
              </select>
            </div>
          </div>
        </div>
        <div class="row">
          <h5 class="center">Products selection</h5>
          <hr />
          <div
            class="col m4 s12"
            style="border: 2px solid #757575; min-height: 100px"
          >
            <div class="form-input">
              <label for="product"
                >Product <span class="red-text">(*)</span></label
              >
              <select
                class="browser-default"
                name="product"
                id="product"
                [(ngModel)]="order_product.product"
                [compareWith]="compareFn"
              >
                <option [ngValue]="null" disabled>Select product</option>
                <option *ngFor="let item of filteredProducts" [ngValue]="item">
                  {{ item.name }}
                </option>
              </select>
            </div>
            <!-- Quantity -->
            <div class="form-input">
              <label for="quantity"
                >Quantity <span class="red-text">(*)</span></label
              >
              <div class="input-field">
                <input
                  type="number"
                  class="form-control"
                  id="quantity"
                  name="quantity"
                  [(ngModel)]="order_product.quantity"
                  #phone="ngModel"
                  min="0"
                />
              </div>
            </div>
            <!-- Unit price -->
            <div class="form-input">
              <label for="price">Price <span class="red-text">(*)</span></label>
              <div class="input-field">
                <input
                  type="number"
                  class="form-control"
                  id="price"
                  name="price"
                  min="0"
                  [(ngModel)]="order_product.unit_price"
                  #email="ngModel"
                />
              </div>
            </div>
          </div>
          <div class="col m2 s12">
            <button
              type="button"
              class="waves-effect waves-light btn btn-small brown darken-3"
              [disabled]="disabledAssignButton()"
              (click)="assignProduct()"
            >
              <i class="material-icons">compare_arrows</i>
              Assign
            </button>
          </div>
          <div
            class="col m6 s12"
            style="border: 2px solid #757575; min-height: 100px"
          >
            <h5 class="center">Ordered products</h5>
            <table>
              <thead class="center">
                <tr>
                  <th>Product</th>
                  <th>Quantity</th>
                  <th>Unit price</th>
                  <th></th>
                </tr>
              </thead>
              <tbody class="center">
                <tr *ngFor="let item of order_products_list">
                  <td>{{ item.product.name }}</td>
                  <td>{{ item.quantity }}</td>
                  <td>{{ item.unit_price }}</td>
                  <td>
                    <a
                      class="btn-flat red-text"
                      (click)="removeProductToList(item)"
                      ><i class="material-icons">delete_forever</i></a
                    >
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <h5 class="center">Extra information</h5>
          <hr />
          <div class="col m5 s12">
            <p>
              <label>
                <input
                  type="checkbox"
                  class="filled-in"
                  [checked]="isShipping"
                  (change)="stateCheckedBoxShipping($event)"
                />
                <span>Shipping informations</span>
              </label>
            </p>
            <br />
            <p>
              <label>
                <input
                  type="checkbox"
                  class="filled-in"
                  [checked]="isVAT"
                  (change)="stateCheckedBoxVat($event)"
                />
                <span>Add VAT (19.25%)</span>
              </label>
            </p>
            <br />
            <p>
              <label>
                <input
                  type="checkbox"
                  class="filled-in"
                  [checked]="isDiscount"
                  (change)="stateCheckedBoxDiscount($event)"
                />
                <span>Discount (%)</span>
              </label>
            </p>
            <div class="form-input" *ngIf="isDiscount">
              <label for="discount_percent"
                >Discount percentage <span class="red-text">(*)</span></label
              >
              <div class="input-field">
                <input
                  type="number"
                  class="form-control"
                  id="discount_percent"
                  name="discount_percent"
                  [(ngModel)]="po.discount_percent"
                  #discount_percent="ngModel"
                  required
                />
              </div>
            </div>
          </div>
          <div class="col m1 s12"></div>
          <div
            class="col m6 s12"
            style="border: 2px solid #757575; min-height: 100px"
            *ngIf="isShipping"
          >
            <h5 class="center">Shipping Informations</h5>
            <!-- Shipping Terms -->
            <div class="form-input">
              <label for="shipping_terms"
                >Shipping Terms <span class="red-text">(*)</span></label
              >
              <div class="input-field">
                <input
                  type="text"
                  class="form-control"
                  id="shipping_terms"
                  name="shipping_terms"
                  [(ngModel)]="shipping_details.shipping_terms"
                  #shipping_terms="ngModel"
                  required
                />
              </div>
            </div>
            <!-- Shipping Method -->
            <div class="form-input">
              <label for="shipping_method"
                >Shipping Method <span class="red-text">(*)</span></label
              >
              <div class="input-field">
                <input
                  type="text"
                  class="form-control"
                  id="shipping_method"
                  name="shipping_method"
                  [(ngModel)]="shipping_details.shipping_method"
                  #shipping_method="ngModel"
                  required
                />
              </div>
            </div>
            <!-- Shipping Date -->
            <div class="form-input">
              <label for="shipping_date"
                >Shipping Date <span class="red-text">(*)</span></label
              >
              <div class="input-field">
                <input
                  type="date"
                  class="form-control"
                  id="shipping_date"
                  name="shipping_date"
                  [(ngModel)]="shipping_details.shipping_date"
                  #shipping_date="ngModel"
                  required
                />
              </div>
            </div>
            <!-- Shipping amount -->
            <div class="form-input">
              <label for="shipping_amount"
                >Shipping Amount <span class="red-text">(*)</span></label
              >
              <div class="input-field">
                <input
                  type="number"
                  class="form-control"
                  id="shipping_amount"
                  name="shipping_amount"
                  [(ngModel)]="shipping_details.shipping_amount"
                  #shipping_amount="ngModel"
                  min="0"
                  required
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Submit button -->
      <div class="divider"></div>

      <div class="col s12 m12 center">
        <hr />
        <button
          type="submit"
          *ngIf="isAddForm"
          class="waves-effect waves-light btn"
          [disabled]="!clientForm.form.valid || order_products_list.length == 0"
        >
          <i class="material-icons">save</i>
          Save
        </button>

        <button
          type="submit"
          *ngIf="!isAddForm"
          class="waves-effect waves-light btn"
          [disabled]="!clientForm.form.valid || order_products_list.length == 0"
        >
          Update
        </button>
      </div>
    </div>
  </div>
</form>

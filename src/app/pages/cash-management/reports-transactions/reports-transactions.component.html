<app-base [submenus]="submenus"></app-base>
<main>
  <div class="row">
    <div class="col m1"></div>
    <div class="col s12 m10">
      <div class="card hoverable">
        <div class="card-content">
          <div class="blue lighten-1 white-text">
            <span class="card-title center">Cash Register transaction</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row" *ngIf="transactions">
    <div class="col s12 m12 center">
      <button class="btn-small blue" (click)="generatePdf2()">
        <i class="material-icons">print</i>Print transactions
      </button>
    </div>
    <div class="col m1"></div>
    <div class="col s12 m10">
      <div class="card hoverable" #poDiv id="purchaseOrder">
        <div class="card-content">
          <div class="row grey lighten-1 header-po">
            <div class="col s4 m4">
              <img
                src="../../../../assets/images/almapps-logo.png"
                style="height: 40px"
                alt=""
              />
            </div>
            <div class="col s8 m8 right-align"><h5>DAILY TRANSACTIONS</h5></div>
          </div>
          <div class="row">
            <div class="col s5 m5 center">
              <p style="font-size: 16px; border: 2px solid black">
                <b *ngIf="register"
                  >Date: {{ register.date | date: "dd-MM-YYYY" }}</b
                >
              </p>
            </div>
          </div>
          <div class="row" style="font-size: 13px !important">
            <div class="col s2 m2"></div>
            <div class="col s8 m8">
              <h6
                class="center blue darken-2 white-text"
                style="padding: 8px 0 8px 0px"
              >
                Transactions list
              </h6>
            </div>
            <div class="col s2 m2"></div>
          </div>
          <div class="row">
            <table *ngIf="transactions">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Transacion</th>
                  <th>Date</th>
                  <th>Credit</th>
                  <th>Debit</th>
                </tr>
              </thead>
              <tbody *ngIf="transactions.length != 0">
                <tr *ngFor="let item of transactions; let i = index">
                  <td>{{ i + 1 }}</td>
                  <td>{{ item.description }}</td>
                  <td>
                    <p>{{ item.date | date: "dd-MM-YYYY" }}</p>
                  </td>
                  <td>
                    <p
                      class="right-align green-text"
                      style="font-weight: bolder"
                      *ngIf="item.type == 'in'"
                    >
                      {{ item.amount | customCurrency }}
                    </p>
                    <p
                      class="right-align green-text"
                      style="font-weight: bolder"
                      *ngIf="item.type != 'in'"
                    >
                      -
                    </p>
                  </td>
                  <td>
                    <p
                      class="right-align red-text"
                      style="font-weight: bolder"
                      *ngIf="item.type == 'out'"
                    >
                      {{ item.amount | customCurrency }}
                    </p>
                    <p
                      class="right-align red-text"
                      style="font-weight: bolder"
                      *ngIf="item.type != 'out'"
                    >
                      -
                    </p>
                  </td>
                </tr>
                <tr>
                  <td></td>
                  <td colspan="2">
                    <b>Total</b>
                  </td>
                  <td>
                    <p
                      class="right-align green white-text"
                      style="font-weight: bolder"
                    >
                      {{ totalCredit | customCurrency }}
                    </p>
                  </td>
                  <td>
                    <p
                      class="right-align red white-text"
                      style="font-weight: bolder"
                    >
                      {{ totalDebit | customCurrency }}
                    </p>
                  </td>
                </tr>
              </tbody>
              <tbody *ngIf="transactions.length == 0">
                <tr>
                  <td colspan="5" class="center">
                    <p class="red-text">
                      No transaction available for card register.
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
            <br /><br />
            <table>
              <thead>
                <tr class="grey white-text">
                  <th>Opening balance</th>
                  <th>Total credit</th>
                  <th>Total debit</th>
                  <th>Closing balance</th>
                </tr>
              </thead>
              <tbody>
                <tr style="font-weight: bolder">
                  <td>{{ register.opening_balance | customCurrency }}</td>
                  <td class="green white-text">
                    {{ totalCredit | customCurrency }}
                  </td>
                  <td class="red white-text">
                    {{ totalDebit | customCurrency }}
                  </td>
                  <td>
                    {{ calculateClosingBalance() | customCurrency }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="row">
            <p>
              Amount in leters:
              <b>{{ calculateClosingBalance() | currencyToWord }} FCFA</b>
            </p>
          </div>
          <br />
        </div>
      </div>
    </div>
  </div>
</main>
